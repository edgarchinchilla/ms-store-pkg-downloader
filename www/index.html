<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="icon" type="image/png" href="https://apps.microsoft.com/assets/icons/dark-logo-32x32.png" /> -->
    <link rel="icon" type="image/x-icon" href="https://apps.microsoft.com/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/style.css">
    <script type="text/javascript" src="./js/logic.js"></script>
    <title>Microsoft Store MSIX Downloader</title>
</head>

<body>
    <!-- HIDDEN FORM TO PROCESS THE "POST" CALL TO THE rg-adguard.net MS STORE API -->
    <form id="appListForm" method="post" action="https://store.rg-adguard.net/api/GetFiles" target="_blank">
        <input type="hidden" id="typeInput" name="type" value="ProductId">
        <input type="hidden" id="appId" name="url" value="">
        <input type="hidden" id="langInput" name="lang" value="es">
        <select hidden="hidden" id="ringInput" name="ring">
            <option value="RP">RP</option>
            <option value="Retail">Retail</option>
            <option value="WIF">WIF</option>
            <option value="WIS">WIS</option>
        </select>
        <!-- <input type="submit" value="Submit"> -->
    </form>

    <!-- APP INFO MODAL -->
    <div id="modal" class="modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-header">
                <p style="padding-left: 25px; padding-right: 25px;" id="appInfoHeader"></p>
                <span class="btnclose btnclose-modal" onClick="changeModalStatus('close', '', '')">&times;</span>
            </div>
            <div class="modal-body">
                <p id="appInfoDescription"></p>
            </div>
            <div class="modal-footer">
                <span>...</span>
            </div>
        </div>
    </div>

    <!-- CREDITS AND WARNINGS -->
    <div class="alert">
        <span class="btnclose" onClick="this.parentElement.style.display='none';">&times;</span>
        *This site relies on the services of <a href="https://store.rg-adguard.net/">rg-adguard.net</a>
    </div>
    
    <!-- FILTER FIELD-->
    <form id="searchBox">
        <input type="text" id="filter" placeholder="Filter by App name...">
        <button type="reset" id="clear" onClick="resetTableFilters()">&times;</button>
    </form>

    <!-- DYNAMIC APPS LIST HOLDER -->
    <table id="appsList"></table>
    <!-- DYNAMIC APPS LIST BUILDER -->
    <script>
        // Call the function to load data on page load
        loadJsonAndBuildAppsList();
        addTableFiltering();
    </script>

    <!-- FOOTER -->
    <div class="footer-container">
        <footer class="">
            It's free! Enjoy it!
        </footer>
        <a href="https://github.com/edgarchinchilla/ms-store-pkg-downloader/" target="_blank">Fork on Github</a>
    </div>
</body>

</html>